# handle svn cleanly and nicely
# comletely untested

# what I want to do in the future: 
# default mode: re-up co'd directories
# force mode: up all directories, and co all new directories
# mirror mode: for a backup server to mirror all the repos
	       (ie not just copy the current revision but the whole history)
# trust flag: applies to any mode. if set, then co dangerous directories
#	      all co'd directories are up'd, reguardless of this flag
# dsrc flag: if set, then also rsync(?) with ~/opt/dsrc
	     not to be used for uploading ... do that manually

if ( -d ~/opt ) then
	cd ~/opt	# working directory... all my repos go here
else 
	printf "what. no ~/opt."
	exit

setenv REPOUP	'svn up ~/opt/dhd ; svn up ~/opt/dtbox' 

setenv REPOCO	'svn co svn+ssh://mrled@mrled.org/home/mrled/svn/dhd ; \
		 svn co svn+ssh://mrled@mrled.org/homr/mrled/svn/dtbox'

if ( $1 == trust ) then		# this host is good for it, trust me
	setenv REPOUP "${REPOUP} ; svn up ~/opt/uenc ; svn up ~/opt/dneuric"
	setenv REPOCO "${REPOCO} ; \
	 svn co svn+ssh://mrled@mrled.org/home/mrled/svn/uenc ; \
	 svn co svn+ssh://mrled@mrled.org/home/mrled/svn/dneuric"


if ( $1 == 'lco' ) then		# local checkout
	$REPOCO
else if ( $1 == 'lup' ) then	# local update
	$REPOUP
else if ( $1 == 'rup' ) then	# remote update
	ssh mrled@mrled.org \'$REPOUP\' &
	ssh mledbetter@vlack.com \'$REPOUP\' &
	ssh vlack@silenceisdefeat.org \'$REPOUP\' &
else if ( $1 == 'rco' ) then 	# remote checkout
	ssh '$2' \'$REPOCO\'
else				# you suck
	echo "error. what have you done!?"
endif


echo 'do not forget dsrc if you need it'
echo 'scp mrled@mrled.org:~/opt/dsrc .'