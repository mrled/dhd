proto udp
port {{ openvpn_port }}
dev {{ openvpn_tun_devname }}
iproute /etc/openvpn/sudo-ip.sh
verb 3
keepalive 10 60
persist-key
persist-tun
comp-lzo
key-direction 0
user {{ openvpn_user }}
group {{ openvpn_group }}
server {{ openvpn_private_addr | ipaddr('network') }} {{ openvpn_private_addr | ipaddr('netmask') }}
client-to-client

# Easiest for me to just write logs & state to /etc, sorry, I know, sorry
log /etc/openvpn/openvpn-server.log
status /etc/openvpn/openvpn-status.log
ifconfig-pool-persist /etc/openvpn/ipp.txt

push "redirect-gateway def1"
push "dhcp-option DNS {{ openvpn_dns_a }}"
push "dhcp-option DNS {{ openvpn_dns_b }}"

<key>
{{ openvpn_server_key }}
</key>
<cert>
{{ openvpn_server_cert }}
</cert>
<ca>
{{ openvpn_ca_cert }}
</ca>
<dh>
{{ openvpn_dh_param }}
</dh>
<tls-auth>
{{ openvpn_tlsauth_key }}
</tls-auth>

